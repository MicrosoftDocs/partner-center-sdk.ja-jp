---
title: パートナーセンターでの API アクセスの設定
description: パートナーセンター SDK に対して開発するためのアカウントを設定し、統合サンドボックスでテストします。
ms.assetid: 182A6831-6F00-4762-9A86-327BF87EA6AC
ms.date: 05/29/2019
ms.service: partner-dashboard
ms.subservice: partnercenter-csp
ms.localizationpriority: medium
ms.openlocfilehash: 55c7259943dae2cd34ead9583f95afc38df47a3f
ms.sourcegitcommit: fbfad1ae706c8e4bdae080e5d79bc158d6b55d02
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/26/2019
ms.locfileid: "74488062"
---
# <a name="set-up-api-access-in-partner-center"></a>パートナーセンターでの API アクセスの設定

適用対象:

- パートナー センター
- 21Vianet が運営するパートナー センター
- 米国政府機関向け Microsoft Cloud のパートナー センター
- Microsoft Cloud ドイツのパートナー センター

このトピックでは、パートナーセンター SDK に対して開発する必要があるアカウントについて説明します。 このトピックでは、統合[サンドボックスアカウント](#integration-sandbox-account)を作成し、統合サンドボックスでテストする方法についても説明します。

## <a name="account-definitions"></a>アカウント定義

API の統合とテストに役立つように、パートナー センターは次の 2 種類のアカウントをサポートします。

### <a name="primary-partner-account"></a>プライマリパートナーアカウント

このアカウントでは、実際の顧客向けに実際の注文を作成します。 パートナーセンター SDK またはパートナーダッシュボード UI のいずれかを使用して、プライマリアカウントにサインインしたときに変更またはトランザクションを行った場合は、実際の顧客に対する公式の注文として扱われます。 これらは請求書に反映され、貴社はその料金を支払うものとします。

### <a name="integration-sandbox-account"></a>統合サンドボックス アカウント

このアカウントは、コードとパートナーセンター Api との統合を広範囲にデプロイする前にテストするためのものです。 統合サンドボックス アカウントにサインイン中に行う変更とトランザクションは、請求書には表示されません。

統合サンドボックス アカウントとプライマリ アカウントは独立して機能し、管理者アカウント、ユーザー アカウント、顧客、注文、サブスクリプションなどのデータは共有されません。

統合サンドボックスでは、限られた数の顧客、注文、サブスクリプション、シートなどのトランザクションがサポートされます。

ポリシーでは、統合サンドボックス アカウントは統合テストのみを目的としています。

既定では、統合サンドボックスアカウントはありません。 パートナーセンター SDK を使用する予定がある場合は、自分で作成する必要があります。

## <a name="set-up-your-accounts"></a>アカウントを設定する

このセクションでは、パートナーセンター SDK のプライマリパートナーアカウントと統合サンドボックスアカウントを設定する方法について説明します。

### <a name="create-an-integration-sandbox"></a>統合サンドボックスを作成する

1. グローバル管理者アカウント (プライマリパートナーアカウント) を使用してパートナーダッシュボードにサインインします。
2. **[設定]** メニュー (歯車アイコン) から、 **[パートナーの設定]** を選択します。
3. **[アカウント設定]** ページで、 **[統合サンドボックス]** を選択します。

    >[!NOTE]
    >統合サンドボックスオプションが表示されない場合は、グローバル管理者アカウントを持っていない可能性があります。 統合サンドボックスアカウントを使用していて、統合サンドボックスが既に設定されている場合もあります。

4. 統合サンドボックスの管理者アカウントの連絡先情報を入力します。 次に、 **[アカウントの作成]** を選択します。 アカウントが作成されたことを示す確認メッセージが表示されるまで、数分待ちます。
5. 確認メッセージが表示されたら、パートナーダッシュボードからサインアウトします。
6. 新しい統合サンドボックス管理者アカウントでもう一度サインインします。 資格情報には、指定したパスワードと共に **username@domain** 形式を使用するようにしてください。
7. [**現在のタスク**の上に**アカウントを設定**する] を選択して、サンドボックスアカウントの設定を完了します。

### <a name="enable-api-access"></a>API アクセスを有効にする

アカウントがセットアップされたら、統合サンドボックスでパートナーセンター SDK を使用する前に、API アクセスを有効にする必要があります。 プライマリパートナーアカウントと統合サンドボックスアカウントの両方に対して、API へのアクセスを個別に有効にする必要があります。

1. グローバル管理者アカウントを使用してパートナーダッシュボードにサインインします。
2. **[設定]** メニュー (歯車アイコン) から、 **[パートナーの設定]** を選択します。
3. **[アカウント設定]** ページで、 **[アプリ管理]** を選択します。
4. 既存のアプリがまだない場合は、新しい web アプリを追加します。 既存の web アプリがある場合は、 **[キーの追加]** ボタンをクリックします。
5. アプリの登録情報 (特に web アプリを作成する場合は**キー** ) をコピーし、安全な場所に保存します。
6. パートナーダッシュボードからサインアウトします。
7. 統合サンドボックスアカウントを使用してもう一度サインインします。 手順2-5 を繰り返して、統合サンドボックスで API アクセスを有効にします。

## <a name="write-and-test-code"></a>コードの記述とテスト

統合サンドボックスでコードを記述し、コードをテストできます。 Azure AD で[パートナーセンターの認証を設定](partner-center-authentication.md)するには、次の情報が必要です。

| 項目名 | 項目の場所 |
| --------- | ------------- |
| アプリ ID /クライアント ID | **[設定]** メニュー (歯車アイコン) から、 **[パートナーの設定]** を選択します。 **[アカウント設定]** ページで、 **[アプリ管理]** を選択します。 アプリ ID/クライアント ID が**登録済みアプリケーションアプリ id**として一覧表示されます。 |
| Key | 「 [API アクセスを有効に](#enable-api-access)する」セクションで web アプリを作成した場合、これは手順 5. で保存したキーです。 |
| ドメイン | 統合サンドボックスのドメイン。 |

## <a name="run-tested-code"></a>テストされたコードの実行

実際の顧客データでソリューションを使用するには、統合サンドボックスの資格情報から、プライマリパートナーアカウントの資格情報に変更する必要があります。

テスト済みのコードをプライマリパートナーアカウントで使用する準備ができたら、Azure AD セキュリティトークンを取得する必要があります。 このセキュリティトークンは、(統合サンドボックスアプリ、キー、ドメインではなく) パートナーセンターのアプリ、キー、およびドメインに基づいています。

1. [パートナーセンターの認証](partner-center-authentication.md)の手順に従って、プライマリパートナーセンターの資格情報を使用して Azure AD セキュリティトークンを取得します。 (前述の手順に従って、統合サンドボックスの Azure AD セキュリティトークンを取得しています)。
2. コード内の統合セキュリティトークンを、プライマリパートナーアカウントの新しいセキュリティトークンに置き換えます。