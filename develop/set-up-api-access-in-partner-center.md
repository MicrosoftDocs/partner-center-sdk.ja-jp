---
title: パートナー センターでの API アクセスの設定
description: パートナー センター SDK に対して開発を行うためのアカウントを設定し、統合サンドボックスでテストします。
ms.assetid: 182A6831-6F00-4762-9A86-327BF87EA6AC
ms.date: 05/29/2019
ms.service: partner-dashboard
ms.subservice: partnercenter-sdk
ms.localizationpriority: medium
ms.openlocfilehash: f98541f22f905238bc374c6215edd8460cc34fc6
ms.sourcegitcommit: def3d4b9d7ba2bf5b1fd268d2e71dae5d5f65a6e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/31/2020
ms.locfileid: "80415239"
---
# <a name="set-up-api-access-in-partner-center"></a>パートナー センターでの API アクセスの設定

適用先:

- パートナー センター
- 21Vianet が運営するパートナー センター
- 米国政府機関向け Microsoft Cloud のパートナー センター
- Microsoft Cloud ドイツのパートナー センター

このトピックでは、パートナー センター SDK に対する開発に必要なアカウントについて説明します。 また、[統合サンドボックス アカウント](#integration-sandbox-account)を作成する方法、統合サンドボックスでテストする方法について説明します。

## <a name="account-definitions"></a>アカウントの定義

API の統合とテストに役立つように、パートナー センターは次の 2 種類のアカウントをサポートします。

### <a name="primary-partner-account"></a>プライマリ パートナー アカウント

このアカウントでは、実際のお客様用に実際の注文を作成します。 プライマリ アカウントにサインイン中に、パートナー センター SDK またはパートナー ダッシュボード UI のいずれかを使って変更やトランザクションを行う場合、それらは実際のお客様用の正式な注文として処理されます。 これらは請求書に反映され、貴社はその料金を支払うものとします。

### <a name="integration-sandbox-account"></a>統合サンドボックス アカウント

このアカウントでは、広範に展開する前に、コードと、パートナー センター API とのコードの統合をテストします。 統合サンドボックス アカウントにサインイン中に行う変更とトランザクションは、請求書には表示されません。

統合サンドボックス アカウントとプライマリ アカウントは独立して機能し、管理者アカウント、ユーザー アカウント、顧客、注文、サブスクリプションなどのデータは共有されません。

統合サンドボックスでは、限られた数の顧客、注文、サブスクリプション、シートなどのトランザクションがサポートされます。

ポリシーでは、統合サンドボックス アカウントは統合テストのみを目的としています。

既定では、統合サンドボックス アカウントはありません。 パートナー センター SDK を使う予定がある場合は、これを作成する必要があります。

## <a name="set-up-your-accounts"></a>アカウントを設定する

このセクションでは、パートナー センター SDK 用のプライマリ パートナー アカウントと統合サンドボックス アカウントを設定する方法について説明します。

### <a name="create-an-integration-sandbox"></a>統合サンドボックスを作成する

1. 全体管理者アカウント (プライマリ パートナー アカウント) を使用して、パートナー ダッシュボードにサインインします。
2. **[設定]** メニュー (歯車アイコン) から、 **[パートナーの設定]** を選択します。
3. **[アカウント設定]** ページで、 **[統合サンドボックス]** を選択します。

    >[!NOTE]
    >統合サンドボックスのオプションが表示されない場合は、全体管理者アカウントを持っていない可能性があります。 統合サンドボックスアカウントを使用していて、統合サンドボックスが既に設定されている可能性もあります。

4. 統合サンドボックスの管理者アカウントの連絡先情報を入力します。 次に、 **[アカウントの作成]** を選択します。 アカウントが作成されたことを示す確認メッセージが表示されるまで、数分待ちます。
5. 確認メッセージが表示されたら、パートナー ダッシュボードからサインアウトします。
6. 新しい統合サンドボックス管理者アカウントでもう一度サインインします。 資格情報には、 **username@domain** という形式と共に、指定したパスワードを使用してください。
7. **[現在のタスク]** の上の **[アカウントの設定]** を選択して、サンドボックス アカウント設定を完了します。

### <a name="enable-api-access"></a>API アクセスを有効にする

アカウントが設定されたら、統合サンドボックスでパートナー センター SDK を使うには、事前に API アクセスを有効にする必要があります。 プライマリ パートナー アカウントと、統合サンドボックス アカウントの両方で、個別に API へのアクセスを有効にする必要があります。

1. 全体管理者アカウントを使って、パートナー ダッシュボードにサインインします。
2. **[設定]** メニュー (歯車アイコン) から、 **[パートナーの設定]** を選択します。
3. **[アカウント設定]** ページで、 **[App management]\(アプリの管理\)** を選択します。
4. 既存のアプリがまだない場合は、新しい Web アプリを追加します。 既存の Web アプリがある場合は、 **[キーの追加]** ボタンをクリックします。
5. Web アプリを作成する場合は、アプリの登録情報 (特に **[キー]** ) をコピーし、安全な場所に保存します。
6. パートナー ダッシュボードからサインアウトします。
7. 統合サンドボックス アカウントでもう一度サインインします。 手順 2 - 5 を繰り返し、統合サンドボックスで API アクセスを有効にします。

## <a name="write-and-test-code"></a>コードの記述とテスト

統合サンドボックスでコードを記述し、コードをテストできます。 Azure AD を使って[パートナー センターの認証を設定](partner-center-authentication.md)するには、次の情報が必要です。

| 項目名 | 項目の場所 |
| --------- | ------------- |
| アプリ ID /クライアント ID | **[設定]** メニュー (歯車アイコン) から、 **[パートナーの設定]** を選択します。 **[アカウント設定]** ページで、 **[App Management]\(アプリの管理\)** を選択します。 アプリ ID/クライアント ID が、**登録済みアプリケーション アプリ ID** として一覧表示されます。 |
| キー | 「[API アクセスを有効にする](#enable-api-access)」セクションで Web アプリを作成した場合、これは手順 5. で保存したキーです。 |
| ドメイン | 統合サンドボックスのドメインです。 |

## <a name="run-tested-code"></a>テストされたコードの実行

実際の顧客データでソリューションを使用するには、統合サンドボックスの資格情報から、プライマリ パートナー アカウントの資格情報に変更する必要があります。

テスト済みコードをプライマリ パートナー アカウントで使用する準備ができたら、Azure AD セキュリティ トークンを取得する必要があります。 このセキュリティ トークンは、(統合サンドボックスのアプリ、キー、ドメインではなく) パートナー センターのアプリ、キー、およびドメインに基づいています。

1. [パートナー センターの認証](partner-center-authentication.md)に関する記事の手順に従って、プライマリ パートナー センターの資格情報を使用して Azure AD セキュリティ トークンを取得します (前にこれらの手順に従って、統合サンドボックスの Azure AD セキュリティ トークンを取得しています)。
2. コード内の統合セキュリティ トークンを、プライマリ パートナー アカウントの新しいセキュリティ トークンに置き換えます。